# Debug Configuration - Small dataset for fast testing

model:
  model_name_or_path: "mistralai/Mistral-7B-Instruct-v0.3"
  use_gradient_checkpointing: true
  torch_dtype: "bfloat16"

data:
  dataset_name: "Anthropic/hh-rlhf"
  max_length: 512  # Keep reasonable context for Mistral
  max_prompt_length: 256
  train_split: "train"
  val_ratio: 0.2  # Larger val set for debugging
  test_ratio: 0.1
  num_proc: 2

training:
  learning_rate: 2.0e-4
  num_epochs: 1
  per_device_batch_size: 1
  gradient_accumulation_steps: 4
  warmup_ratio: 0.1
  weight_decay: 0.01
  max_grad_norm: 1.0
  fp16: true  # Use autocast bf16
  logging_steps: 1
  eval_steps: 10
  save_steps: 50
  save_total_limit: 2
  seed: 42

# DPO-specific (for DPO debug mode)
beta: 0.1
loss_type: "sigmoid"
label_smoothing: 0.0

output_dir: "outputs/debug"

logging:
  log_level: "debug"
  use_wandb: false
  wandb_project: "dpo-hh"
  wandb_run_name: "debug"
